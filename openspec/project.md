# 项目上下文

## 项目目标

开发一个企业级微服务平台，包含：

1. 基础权限管理（当前阶段）
    - 菜单资源管理
    - 角色权限控制
    - 用户管理
2. 后续功能模块
    - CRM 客户关系管理
    - SRM 供应商关系管理
    - 财务中心
    - 客服中心
    - 统计报表

## 技术栈

-   后端框架: NestJS
-   数据库: MySQL + Redis
-   认证授权: JWT
-   API 文档: Swagger/OpenAPI
-   容器化: Docker
-   部署: Kubernetes (计划中)

## 项目规范

### 代码风格

-   使用 ESLint + Prettier 进行代码格式化
-   遵循 TypeScript 严格模式
-   使用 JSDoc 进行代码注释
-   接口命名使用大驼峰，变量使用小驼峰

### 架构模式

-   领域驱动设计(DDD)
-   模块化架构
-   RESTful API 设计规范
-   使用装饰器进行权限控制

### 测试策略

-   单元测试: Jest
-   E2E 测试: Supertest
-   测试覆盖率要求: 核心业务逻辑>=80%
-   使用 Husky + lint-staged 进行提交前检查

### Git 工作流

-   主分支: main (保护分支)
-   开发分支: develop
-   功能分支: feature/[功能名称]
-   修复分支: bugfix/[问题描述]
-   提交信息格式:
    -   feat: 新功能
    -   fix: 修复 bug
    -   docs: 文档更新
    -   style: 代码格式调整
    -   refactor: 代码重构
    -   test: 测试相关
    -   chore: 构建过程或辅助工具的变动

## 领域上下文

### 权限管理模块

-   基于 RBAC(基于角色的访问控制)模型
-   支持多租户(未来扩展)
-   支持数据权限控制

### 微服务架构

-   服务发现与注册
-   服务间通信(REST/gRPC)
-   分布式事务处理
-   统一认证授权中心

## 重要约束

1. 安全性要求

    - 所有 API 必须进行权限验证
    - 敏感数据加密存储
    - 防止 SQL 注入和 XSS 攻击

2. 性能要求
    - 接口响应时间<500ms
    - 支持水平扩展
    - 使用 Redis 缓存热点数据

## 外部依赖

-   阿里云 OSS (文件存储)
-   短信服务 (待定)
-   邮件服务 (待定)
-   第三方支付接口 (待定)
